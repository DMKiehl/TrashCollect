@model TrashCollector.Models.Customer

@{
    ViewData["Title"] = "Map";
}
<style>
    #map {
        height: 500px;
    }
</style>
<br />
<br />
<h1>Map</h1>

<br />
<div id="map"></div>

<script>
    var map;
    function initMap(zoomeLevel, latDb, longDb) {
        map = new google.maps.Map(document.getElementById('map'), {
            center: { lat: @Model.latitude, lng: @Model.longitude },
            zoom: zoomeLevel != null ? zoomeLevel : 6
        });

        

        marker = new google.maps.Marker({
            position: { lat: @Model.latitude, lng: @Model.longitude },
            map: map
        });

        infoWindow = new google.maps.InfoWindow;

    //    // Try HTML5 geolocation.
    //    if (navigator.geolocation) {
    //        navigator.geolocation.getCurrentPosition(function (position) {
    //            var pos = {
    //                lat: position.coords.latitude,
    //                lng: position.coords.longitude
    //            };

    //            infoWindow.setPosition(pos);
    //            infoWindow.setContent('Location found.');
    //            infoWindow.open(map);
    //            map.setCenter(pos);
    //        }, function () {
    //            handleLocationError(true, infoWindow, map.getCenter());
    //        });
    //    } else {
    //        // Browser doesn't support Geolocation
    //        handleLocationError(false, infoWindow, map.getCenter());
    //    }
    //}

    //function handleLocationError(browserHasGeolocation, infoWindow, pos) {
    //    infoWindow.setPosition(pos);
    //    infoWindow.setContent(browserHasGeolocation ?
    //        'Error: The Geolocation service failed.' :
    //        'Error: Your browser doesn\'t support geolocation.');
    //    infoWindow.open(map);
    //}


    //function GoLocation(locationId) {
    //    $.get("/Home/GetAllLocationById?id=" + locationId, function (data, status) {
    //        var iconName = data.Rating == 1 ? "../Icons/one.png" : data.Rating == 2 ? "../Icons/two.png" : "../Icons/three.png";
    //        initMap(data.Zoom, data.Lat, data.Long);
    //        marker = new google.maps.Marker({
    //            position: { lat: data.Lat, lng: data.Long },
    //            map: map,
    //            icon: iconName
    //        });
    //        contentString = '<div id="content">' +
    //            '<div id="siteNotice">' +
    //            '</div>' +
    //            '<h1 id="firstHeading" class="firstHeading">' + data.Address + '</h1>' +
    //            '<div id="bodyContent">' +
    //            '<p><b>' + data.Address + '</b>, also referred to as <b>Ayers Rock</b>, is a large ' +
    //            'sandstone rock formation in the southern part of the ' +
    //            'Northern Territory, central Australia. It lies 335&#160;km (208&#160;mi) ' +
    //            'south west of the nearest large town, Alice Springs; 450&#160;km ';
    //        infowindow = new google.maps.InfoWindow({
    //            content: contentString
    //        });
    //        google.maps.event.addListener(marker, 'mouseover', (function (marker, i) {
    //            return function () {
    //                infowindow.open(map, marker);
    //            }
    //        })(marker, i));
    //        google.maps.event.addListener(marker, 'mouseout', (function (marker, i) {
    //            return function () {
    //                infowindow.close();
    //            }
    //        })(marker, i));
    //    })
    //}
</script>

<script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyDa7YADatqC-ikFP7JAmoeQntbDy4Qm93Q&callback=initMap" async defer></script>



